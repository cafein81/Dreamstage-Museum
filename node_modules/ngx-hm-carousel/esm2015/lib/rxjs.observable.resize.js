/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import ResizeObserver from 'resize-observer-polyfill';
import { Observable } from 'rxjs';
import { debounceTime, tap, finalize } from 'rxjs/operators';
/**
 * An observable creator for element resize.
 * @param {?} elm the watch element.
 * @param {?} cb when resize complete, call back function.
 * @param {?=} time resize emit time, default is 200
 * @return {?}
 */
export function resizeObservable(elm, cb, time = 200) {
    /** @type {?} */
    let elmObserve$;
    return Observable.create((/**
     * @param {?} observer
     * @return {?}
     */
    (observer) => {
        elmObserve$ = new ResizeObserver((/**
         * @param {?} entries
         * @param {?} obs
         * @return {?}
         */
        (entries, obs) => {
            observer.next(elmObserve$);
        }));
        elmObserve$.observe(elm);
    })).pipe(debounceTime(time), tap((/**
     * @return {?}
     */
    () => {
        cb();
    })), finalize((/**
     * @return {?}
     */
    () => {
        elmObserve$.unobserve(elm);
        elmObserve$.disconnect();
    })));
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicnhqcy5vYnNlcnZhYmxlLnJlc2l6ZS5qcyIsInNvdXJjZVJvb3QiOiJuZzovL25neC1obS1jYXJvdXNlbC8iLCJzb3VyY2VzIjpbImxpYi9yeGpzLm9ic2VydmFibGUucmVzaXplLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7QUFBQSxPQUFPLGNBQWMsTUFBTSwwQkFBMEIsQ0FBQztBQUN0RCxPQUFPLEVBQUUsVUFBVSxFQUFjLE1BQU0sTUFBTSxDQUFDO0FBQzlDLE9BQU8sRUFBRSxZQUFZLEVBQUUsR0FBRyxFQUFFLFFBQVEsRUFBRSxNQUFNLGdCQUFnQixDQUFDOzs7Ozs7OztBQVE3RCxNQUFNLFVBQVUsZ0JBQWdCLENBQUMsR0FBZ0IsRUFBRSxFQUFjLEVBQUUsSUFBSSxHQUFHLEdBQUc7O1FBQ3ZFLFdBQTJCO0lBQy9CLE9BQU8sVUFBVSxDQUFDLE1BQU07Ozs7SUFBQyxDQUFDLFFBQXlCLEVBQUUsRUFBRTtRQUNyRCxXQUFXLEdBQUcsSUFBSSxjQUFjOzs7OztRQUFDLENBQUMsT0FBTyxFQUFFLEdBQUcsRUFBRSxFQUFFO1lBQ2hELFFBQVEsQ0FBQyxJQUFJLENBQUMsV0FBVyxDQUFDLENBQUM7UUFDN0IsQ0FBQyxFQUFDLENBQUM7UUFDSCxXQUFXLENBQUMsT0FBTyxDQUFDLEdBQUcsQ0FBQyxDQUFDO0lBQzNCLENBQUMsRUFBQyxDQUFDLElBQUksQ0FDTCxZQUFZLENBQUMsSUFBSSxDQUFDLEVBQ2xCLEdBQUc7OztJQUFDLEdBQUcsRUFBRTtRQUNQLEVBQUUsRUFBRSxDQUFDO0lBQ1AsQ0FBQyxFQUFDLEVBQ0YsUUFBUTs7O0lBQUMsR0FBRyxFQUFFO1FBQ1osV0FBVyxDQUFDLFNBQVMsQ0FBQyxHQUFHLENBQUMsQ0FBQztRQUMzQixXQUFXLENBQUMsVUFBVSxFQUFFLENBQUM7SUFDM0IsQ0FBQyxFQUFDLENBQ0gsQ0FBQztBQUNKLENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgUmVzaXplT2JzZXJ2ZXIgZnJvbSAncmVzaXplLW9ic2VydmVyLXBvbHlmaWxsJztcbmltcG9ydCB7IE9ic2VydmFibGUsIFN1YnNjcmliZXIgfSBmcm9tICdyeGpzJztcbmltcG9ydCB7IGRlYm91bmNlVGltZSwgdGFwLCBmaW5hbGl6ZSB9IGZyb20gJ3J4anMvb3BlcmF0b3JzJztcblxuLyoqXG4gKiBBbiBvYnNlcnZhYmxlIGNyZWF0b3IgZm9yIGVsZW1lbnQgcmVzaXplLlxuICogQHBhcmFtIGVsbSB0aGUgd2F0Y2ggZWxlbWVudC5cbiAqIEBwYXJhbSBjYiB3aGVuIHJlc2l6ZSBjb21wbGV0ZSwgY2FsbCBiYWNrIGZ1bmN0aW9uLlxuICogQHBhcmFtIHRpbWUgcmVzaXplIGVtaXQgdGltZSwgZGVmYXVsdCBpcyAyMDBcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHJlc2l6ZU9ic2VydmFibGUoZWxtOiBIVE1MRWxlbWVudCwgY2I6ICgpID0+IHZvaWQsIHRpbWUgPSAyMDApOiBPYnNlcnZhYmxlPGFueT4ge1xuICBsZXQgZWxtT2JzZXJ2ZSQ6IFJlc2l6ZU9ic2VydmVyO1xuICByZXR1cm4gT2JzZXJ2YWJsZS5jcmVhdGUoKG9ic2VydmVyOiBTdWJzY3JpYmVyPGFueT4pID0+IHtcbiAgICBlbG1PYnNlcnZlJCA9IG5ldyBSZXNpemVPYnNlcnZlcigoZW50cmllcywgb2JzKSA9PiB7XG4gICAgICBvYnNlcnZlci5uZXh0KGVsbU9ic2VydmUkKTtcbiAgICB9KTtcbiAgICBlbG1PYnNlcnZlJC5vYnNlcnZlKGVsbSk7XG4gIH0pLnBpcGUoXG4gICAgZGVib3VuY2VUaW1lKHRpbWUpLFxuICAgIHRhcCgoKSA9PiB7XG4gICAgICBjYigpO1xuICAgIH0pLFxuICAgIGZpbmFsaXplKCgpID0+IHtcbiAgICAgIGVsbU9ic2VydmUkLnVub2JzZXJ2ZShlbG0pO1xuICAgICAgZWxtT2JzZXJ2ZSQuZGlzY29ubmVjdCgpO1xuICAgIH0pXG4gICk7XG59XG4iXX0=